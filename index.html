<!DOCTYPE html>
<html>
<head>
    <title>CÃ¼zdan Takip</title>
    <style>
        /* 1. GENEL AYARLAR */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #74ebd5, #ACB6E5);
            height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* 2. ANA KASA */
        .kasa { 
            background: rgba(255, 255, 255, 0.9);
            width: 380px; 
            padding: 30px; 
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            max-height: 90vh; /* Ekran kÃ¼Ã§Ã¼kse taÅŸmasÄ±n */
            overflow-y: auto; /* KaydÄ±rma Ã§ubuÄŸu Ã§Ä±ksÄ±n */
        }

        h2 { 
            text-align: center; 
            color: #444; 
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .bakiye-kutu { 
            background: linear-gradient(to right, #11998e, #38ef7d); 
            color: white; 
            padding: 25px; 
            text-align: center; 
            border-radius: 15px; 
            margin-bottom: 25px; 
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4); 
        }
        .bakiye-sayi { 
            font-size: 40px; 
            font-weight: bold; 
            margin-top: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .giris-grubu { 
            display: flex; 
            gap: 10px; 
            margin-bottom: 15px; 
        }
        
        input { 
            padding: 12px; 
            border: 2px solid #eee; 
            border-radius: 10px; 
            width: 100%; 
            outline: none; 
            transition: 0.3s; 
        }
        select {
            padding: 12px; 
            border: 2px solid #eee; 
            border-radius: 10px;
            background: white;
            cursor: pointer;
            outline: none;
            font-weight: bold;
        }

        .gelir-madde { border-left: 5px solid #2ecc71 !important; }
        .gider-madde { border-left: 5px solid #ff4757 !important; }
        
        input:focus { border-color: #38ef7d; }
        
        #ekleBtn { 
            width: 100%; 
            padding: 15px; 
            background-color: #333; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: bold;
            transition: transform 0.1s; 
        }
        
        #ekleBtn:hover { background-color: #555; }
        #ekleBtn:active { transform: scale(0.98); }

        #harcamaListesi { 
            margin-top: 25px; 
            list-style: none; 
            padding: 0; 
            max-height: 200px; 
            overflow-y: auto; 
        }

        #harcamaListesi li { 
            background: white; 
            border-left: 5px solid #ff6b6b; 
            margin-bottom: 10px; 
            padding: 15px; 
            border-radius: 8px;
            display: flex; 
            justify-content: space-between; 
            align-items: center; /* Dikey ortalama */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            font-weight: 500;
        }
        .silBtn { 
            background-color:#ff4757;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
            font-size: 12px;
        }
        .silBtn:hover { background-color: #c0392b; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="kasa">
        <h2>ðŸ’° CÃ¼zdanÄ±m</h2>

        <div class="bakiye-kutu">
            <div>Toplam Harcama</div>
            <div class="bakiye-sayi" id="toplamTutar">0 TL</div>
        </div>
        
        <div style="width: 200px; margin: 0 auto 20px auto;">
            <canvas id="benimGrafigim"></canvas>
        </div>

        <div class="giris-grubu">
            <select id="turSecimi">
                <option value="gider">Gider (-)</option>
                <option value="gelir">Gelir (+)</option>
            </select>
            <input type="text" id="harcamaAdi" placeholder="AÃ§Ä±klama (Ã–rn: MaaÅŸ)">
            <input type="number" id="harcamaFiyat" placeholder="Tutar">
        </div>

        <button id="ekleBtn">Harcama Ekle</button>

        <ul id="harcamaListesi"></ul>
    </div>

    <script>
        const adInput = document.getElementById('harcamaAdi');
        const fiyatInput = document.getElementById('harcamaFiyat');
        const turSecimi = document.getElementById('turSecimi');
        const ekleBtn = document.getElementById('ekleBtn');
        const harcamaListesi = document.getElementById('harcamaListesi');
        const toplamTutar = document.getElementById('toplamTutar');

        let harcamaDizisi = JSON.parse(localStorage.getItem('harcamalarim')) || [];
        let mevcutGrafik = null; // Grafik hafÄ±zasÄ±

        // --- GRAFÄ°K Ã‡Ä°ZME FONKSÄ°YONU (Eksikti, ekledim) ---
        function grafikCiz(gelir, gider) {
            const ctx = document.getElementById('benimGrafigim');
            if (mevcutGrafik) {
                mevcutGrafik.destroy();
            }
            mevcutGrafik = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Gelir (+)', 'Gider (-)'],
                    datasets: [{
                        data: [gelir, gider],
                        backgroundColor: ['#3498db', '#e67e22'],
                        borderWidth: 0
                    }]
                }
            });
        }

        // --- LÄ°STELEME FONKSÄ°YONU ---
        function listeyiEkranaBas() {
            let toplamPara = 0;
            let toplamGelir = 0;
            let toplamGider = 0;
            
            harcamaListesi.innerHTML = '';

            harcamaDizisi.forEach(function(harcama, sira) {
                // Hesaplamalar
                if (harcama.tur === 'gelir') {
                    toplamPara += harcama.fiyat;
                    toplamGelir += harcama.fiyat;
                } else {
                    toplamPara -= harcama.fiyat;
                    toplamGider += harcama.fiyat;
                }

                // HTML OluÅŸturma
                const yeniMadde = document.createElement('li');
                let isaret = harcama.tur === "gelir" ? "+" : "-";
                
                yeniMadde.innerText = `${harcama.ad} ${isaret} ${harcama.fiyat} TL`;
                
                if (harcama.tur === 'gelir') {
                    yeniMadde.classList.add('gelir-madde');
                } else {
                    yeniMadde.classList.add('gider-madde');
                }           

                // Sil Butonu
                const silBtn = document.createElement('button');
                silBtn.innerText = 'Sil';
                silBtn.classList.add('silBtn');
                
                silBtn.addEventListener('click', function() {
                    harcamaDizisi.splice(sira, 1);
                    localStorage.setItem('harcamalarim', JSON.stringify(harcamaDizisi));
                    listeyiEkranaBas();
                });

                yeniMadde.appendChild(silBtn); 
                harcamaListesi.appendChild(yeniMadde);
            });

            // ToplamlarÄ± Yaz
            toplamTutar.innerText = toplamPara + ' TL'; 
            localStorage.setItem("cuzdanbakiyesi", toplamPara);

            // GrafiÄŸi GÃ¼ncelle
            grafikCiz(toplamGelir, toplamGider);
        }

        // --- Ä°LK AÃ‡ILIÅž ---
        listeyiEkranaBas();

        // --- EKLEME BUTONU ---
        ekleBtn.addEventListener("click", function() {
            const secilenTur = document.getElementById("turSecimi").value;
            const girilenAd = document.getElementById("harcamaAdi").value;
            const girilenFiyat = document.getElementById("harcamaFiyat").value;

            if (girilenAd === "" || girilenFiyat === "") {
                alert("LÃ¼tfen boÅŸ alanlarÄ± doldurun!");
                return;
            }

            const yeniVeri = { 
                tur: secilenTur, 
                ad: girilenAd, 
                fiyat: Number(girilenFiyat)
            };

            harcamaDizisi.push(yeniVeri);
            localStorage.setItem("harcamalarim", JSON.stringify(harcamaDizisi));
            
            listeyiEkranaBas();

            // KutularÄ± boÅŸalt
            document.getElementById("harcamaAdi").value = "";
            document.getElementById("harcamaFiyat").value = "";
        });
    </script>       
</body>
</html>
